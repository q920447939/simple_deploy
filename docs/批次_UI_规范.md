# 批次（Batch）组件级 UI 规范（v1）

> 适用范围：批次列表与批次详情页面（单机单人使用）。
> 设计目标：配置/运行/日志/历史统一、信息归属清晰、操作可控、可读性强。

---

## 1. 页面结构（Layout）
- **全局布局**：左侧全局导航；中间批次列表；右侧批次详情。
- **详情布局**：
  - 顶部：`BatchHeader`（标题+状态+关键操作）
  - 次级：`Tabs`（概览/任务/参数/运行记录/设置）
  - 内容区：按 Tab 切换

推荐尺寸（可随主题缩放）：
- 批次列表宽度：`280w`
- 运行记录列表宽度：`320w`
- 标准内边距：`12/16`
- 圆角：`4/8/999`（999 用于 pill/标签）

---

## 2. 组件清单与规范

### 2.1 BatchList（批次列表）
- **结构**：状态筛选 + 新增按钮 + 列表项
- **列表项**：状态点 + 名称 + 描述
- **状态颜色**：
  - Running：蓝
  - Paused：橙
  - Ended：灰
- **交互**：点击行切换详情；选中行高亮

### 2.2 BatchHeader（详情头部）
- **内容**：批次名称、状态 PILL、简介（可选）
- **主操作**：
  - Primary：运行
  - Secondary：沿用上次参数运行 / 编辑批次 / 编辑参数 / 重置为暂停（仅结束态）
- **状态 PILL**：
  - 文本：运行中/暂停/已结束
  - 背景：状态色 12% 透明
  - 边框：状态色
- **禁用规则**：运行中禁用编辑、禁用重复执行

### 2.3 Tabs（分区标签）
- **标签**：概览 / 任务 / 参数 / 运行记录 / 设置
- **状态**：选中高亮（主题色下划线）
- **切换原则**：当批次运行或选择了运行记录时，自动切换至“运行记录”

### 2.4 SummaryCard（概览卡片）
- **用途**：展示关键摘要（状态、控制端、被控端、任务数、最近运行、最近结果）
- **结构**：标题（muted）+ 值（强调）
- **推荐宽度**：`220w`

### 2.5 TaskListItem（任务列表项）
- **内容**：序号 + 任务名 + 描述 + 标签组
- **标签**：任务类型、文件槽位数、变量数、启用/禁用
- **布局**：卡片式分割，每行一任务

### 2.6 ParametersPanel（参数列表）
- **标题区**：
  - 左：当前视图（批次配置 / 运行快照 #N）
  - 右：编辑参数（非运行态）/ 参数快照 / 查看批次配置（当处于运行快照时）
- **参数项**：
  - 标题：任务名
  - 内容：文件摘要、变量摘要（最多 2 行，超出省略）
  - 操作：单任务编辑（非运行态）
- **显示规则**：
  - 选中运行记录时显示“运行快照”并只读

### 2.7 RunsList（运行记录列表）
- **内容**：运行序号 + 开始时间 + 状态图标
- **功能**：批量选择、删除
- **状态**：选中高亮

### 2.8 LogViewer（日志区）
- **结构**：
  - 顶部工具栏：日志类型、行数、刷新、自动滚动、加载完整
  - 内容区：黑底 + 等宽字体 + 可选中文本
- **字体**：`GeistMono` 或系统等宽
- **操作原则**：自动滚动默认开启；用户可切换

### 2.9 ProgressBar（任务进度条）
- **归属**：只放在“运行记录”Tab
- **结构**：系统准备 + 任务节点
- **交互**：点击节点切换对应日志
- **状态色**：等待/运行/成功/失败/阻断

### 2.10 Settings（设置/危险操作）
- **内容**：
  - 运行控制：重置为暂停、强制解锁
  - 危险操作：删除批次
- **规则**：运行中禁用删除

---

## 3. 文本与交互规范
- **按钮层级**：Primary（主动作）、Outline（次动作）、Ghost（轻量动作）、Destructive（危险）
- **空状态文案**：
  - 批次：无批次
  - 任务：暂无任务
  - 运行记录：暂无执行记录
  - 日志：暂无日志
- **操作反馈**：重要操作需二次确认（删除、强制解锁）
- **可读性**：参数/路径字段支持多行显示（maxLines=3）

---

## 4. 状态与权限（单机单人）
- 运行中：禁止编辑配置/参数，禁止重复执行
- 已结束：允许编辑配置/参数，允许再次执行
- 暂停：允许编辑/执行

---

## 5. 交互流程摘要
- 新建批次 → 编辑配置 → 保存
- 编辑参数（不必运行） → 保存
- 运行 → 自动进入运行记录 → 查看日志/进度
- 运行结束 → 可编辑参数/再次运行

---

## 6. 设计一致性说明
- 颜色、间距、字体沿用现有主题与组件库（shadcn + Flutter Material）
- 所有重要操作均在“清晰可达的单一位置”呈现（避免按钮漂移）

