- name: Copy local file to remote host and rename it
  hosts: all
  gather_facts: false
  become: yes
  vars:
    remote_dest_dir: "/home/firework/firework_admin_back"
    remote_dest_filename: "firework-admin-back-0.1.0.jar"

  tasks:
    - name: Ensure destination directory exists
      ansible.builtin.file:
        path: "{{ remote_dest_dir }}"
        state: directory
        mode: '0755'
    - name: Copy and rename file
      ansible.builtin.copy:
        src: "{{ run_dir }}/{{ task_files.firework_jar[0] }}"
        dest: "{{ remote_dest_dir }}/{{ remote_dest_filename }}"
        mode: '0644'
